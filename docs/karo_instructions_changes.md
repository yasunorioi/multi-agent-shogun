# Karo Instructions æ”¹ä¿®æ¡ˆ: é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«v2å¯¾å¿œ

> **ä½œæˆæ—¥**: 2026-02-08
> **å¯¾è±¡**: instructions/karo.md
> **ç›®çš„**: é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«v2ï¼ˆç¬¬1å±¤=YAML inboxæ–¹å¼ã€ç¬¬2å±¤=DBæ°¸ç¶šï¼‰ã¸ã®ç§»è¡Œæ¡ˆ

---

## (1) ç¾è¡Œkaro.mdã®é€šä¿¡é–¢é€£ç®‡æ‰€ä¸€è¦§

### A. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼ˆ34-109è¡Œï¼‰

#### ã‚¿ã‚¹ã‚¯å—é ˜ãƒ»å‰²å½“ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆstep 1-8ï¼‰

```yaml
# è¡Œ34-67
workflow:
  - step: 2
    action: read_yaml
    target: queue/shogun_to_karo.yaml
  - step: 6
    action: create_subtasks
    method: "python3 scripts/botsunichiroku.py subtask add CMD_ID..."
    note: "æ²¡æ—¥éŒ²DBã«ç™»éŒ²ã€‚ãƒ†ã‚­ã‚¹ãƒˆæˆæœç‰©ã¯ --needs-audit ã‚’ä»˜ä¸"
  - step: 7
    action: send_keys
    target: "è¶³è»½: multiagent:agents.{N}, éƒ¨å±‹å­: ooku:agents.{N-5}"
    method: two_bash_calls
    message: "python3 scripts/botsunichiroku.py subtask show SUBTASK_ID ã§ä»»å‹™ã‚’ç¢ºèªã—å®Ÿè¡Œã›ã‚ˆã€‚"
```

**é€šä¿¡æ–¹å¼**: DBæ›¸ãè¾¼ã¿ï¼ˆsubtask addï¼‰â†’ send-keys ã§è¶³è»½èµ·ã“ã—

#### å ±å‘Šå—ä¿¡ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆstep 9-12ï¼‰

```yaml
# è¡Œ69-82
  - step: 9
    action: receive_wakeup
    from: ashigaru
    via: send-keys
  - step: 10
    action: scan_all_reports
    method: "python3 scripts/botsunichiroku.py report list"
    note: "èµ·ã“ã—ãŸè¶³è»½ã ã‘ã§ãªãå…¨å ±å‘Šã‚’å¿…ãšã‚¹ã‚­ãƒ£ãƒ³ï¼ˆç›´è¿‘20ä»¶ï¼‰ã€‚é€šä¿¡ãƒ­ã‚¹ãƒˆå¯¾ç­–"
  - step: 11
    action: update_dashboard
    target: dashboard.md
    section: "æˆ¦æœ"
```

**é€šä¿¡æ–¹å¼**: è¶³è»½ãŒDBã«å ±å‘Šæ›¸ãè¾¼ã¿ï¼ˆreport addï¼‰â†’ send-keys ã§å®¶è€èµ·ã“ã— â†’ å®¶è€ãŒDBèª­ã¿è¾¼ã¿ï¼ˆreport listï¼‰

#### ãŠé‡å­é€£æºãƒ•ã‚§ãƒ¼ã‚ºï¼ˆstep 11.5-11.6ï¼‰

```yaml
# è¡Œ84-104
  - step: 11.5
    action: trigger_audit_if_needed
    note: |
      subtaskå®Œäº†æ™‚ã« needs_audit=1 ãªã‚‰:
      1. python3 scripts/botsunichiroku.py subtask update SUBTASK_ID --audit-status pending
      2. ãŠé‡å­ãŒç©ºã„ã¦ã„ã‚‹ã‹ç¢ºèªï¼ˆaudit_status=in_progress ã®subtaskãŒãªã„ã‹ï¼‰
      3. IDLEã®å ´åˆã®ã¿: send-keys ã§ãŠé‡å­ï¼ˆooku:agents.4ï¼‰ã«ç›£æŸ»ä¾é ¼
  - step: 11.6
    action: receive_audit_result
    from: ohariko
    via: send-keys
```

**é€šä¿¡æ–¹å¼**: DBæ›¸ãè¾¼ã¿ï¼ˆsubtask update --audit-statusï¼‰+ send-keys

---

### B. send-keys ãƒ«ãƒ¼ãƒ«ï¼ˆ142-150è¡Œï¼‰

```yaml
# è¡Œ142-150
send_keys:
  method: two_bash_calls
  to_ashigaru_allowed: true
  to_shogun_allowed: false  # dashboard.mdæ›´æ–°ã§å ±å‘Š
  to_other_karo_allowed: false  # dashboard.mdçµŒç”±ã§é€£æº
  to_ohariko_allowed: true  # ç›£æŸ»ä¾é ¼ã®ã¿ï¼ˆneeds_audit=1ã®subtaskå®Œäº†æ™‚ï¼‰
  reason_shogun_disabled: "æ®¿ã®å…¥åŠ›ä¸­ã«å‰²ã‚Šè¾¼ã¿é˜²æ­¢"
  reason_other_karo_disabled: "å®¶è€é–“ã¯dashboard.mdçµŒç”±ã§é€£æºã€‚send-keysç¦æ­¢"
```

---

### C. tmux send-keys ã®ä½¿ç”¨æ–¹æ³•ï¼ˆ325-389è¡Œï¼‰

#### åŸºæœ¬ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ2å›ã«åˆ†ã‘ã‚‹ï¼‰

```bash
# è¡Œ337-345ï¼ˆè¶³è»½ã®å ´åˆï¼‰
# ã€1å›ç›®ã€‘
tmux send-keys -t multiagent:agents.{N} 'python3 scripts/botsunichiroku.py subtask show SUBTASK_ID ã§ä»»å‹™ã‚’ç¢ºèªã—å®Ÿè¡Œã›ã‚ˆã€‚'
# ã€2å›ç›®ã€‘
tmux send-keys -t multiagent:agents.{N} Enter
```

#### è¤‡æ•°è¶³è»½ã¸ã®é€£ç¶šé€ä¿¡ï¼ˆ2ç§’é–“éš”ï¼‰

```bash
# è¡Œ359-369
# è¶³è»½1ã«é€ä¿¡
tmux send-keys -t multiagent:agents.1 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸'
tmux send-keys -t multiagent:agents.1 Enter
sleep 2
# è¶³è»½2ã«é€ä¿¡
tmux send-keys -t multiagent:agents.2 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸'
tmux send-keys -t multiagent:agents.2 Enter
sleep 2
```

#### åˆ°é”ç¢ºèªï¼ˆ1å›ã®ã¿ï¼‰

```bash
# è¡Œ371-382
# STEP 1: 5ç§’å¾…æ©Ÿ
sleep 5
# STEP 2: è¶³è»½ã®çŠ¶æ…‹ç¢ºèª
tmux capture-pane -t <å¯¾è±¡ãƒšã‚¤ãƒ³> -p | tail -5
# STEP 3: åˆ¤å®š
#   - thinking / working çŠ¶æ…‹ â†’ åˆ°é”OKã€‚stop
#   - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå¾…ã¡ï¼ˆâ¯ï¼‰ã®ã¾ã¾ â†’ 1å›ã ã‘å†é€
# STEP 4: å†é€å¾Œã¯ãã‚Œä»¥ä¸Šè¿½ã‚ãªã„ã€‚stop
```

---

### D. æœªå‡¦ç†å ±å‘Šã‚¹ã‚­ãƒ£ãƒ³ï¼ˆ542-576è¡Œï¼‰

```bash
# è¡Œ553-561
# ç›´è¿‘20ä»¶ã®å ±å‘Šã‚’å–å¾—ï¼ˆãƒ•ã‚£ãƒ«ã‚¿ãªã—ï¼‰
python3 scripts/botsunichiroku.py report list

# ç‰¹å®šã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®å ±å‘Šã‚’ç¢ºèª
python3 scripts/botsunichiroku.py report list --status done

# ç‰¹å®šè¶³è»½ã®å ±å‘Šã‚’ç¢ºèª
python3 scripts/botsunichiroku.py report list --worker ashigaru1
```

**ã‚¹ã‚­ãƒ£ãƒ³åˆ¤å®š**ï¼ˆè¡Œ565-568ï¼‰:
1. task_id ã‚’ç¢ºèª
2. dashboard.md ã®ã€Œé€²è¡Œä¸­ã€ã€Œæˆ¦æœã€ã¨ç…§åˆ
3. dashboard ã«æœªåæ˜ ã®å ±å‘ŠãŒã‚ã‚Œã°å‡¦ç†ã™ã‚‹

**ãªãœå…¨ã‚¹ã‚­ãƒ£ãƒ³ãŒå¿…è¦ã‹**ï¼ˆè¡Œ570-576ï¼‰:
- è¶³è»½ãŒå ±å‘Šã‚’ç™»éŒ²ã—ãŸå¾Œã€send-keys ãŒå±Šã‹ãªã„ã“ã¨ãŒã‚ã‚‹
- å ±å‘Šãƒ¬ã‚³ãƒ¼ãƒ‰è‡ªä½“ã¯æ­£ã—ãç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã‚¹ã‚­ãƒ£ãƒ³ã™ã‚Œã°ç™ºè¦‹ã§ãã‚‹

---

### E. ãŠé‡å­è‡ªå‹•ç›£æŸ»ï¼ˆ436-494è¡Œï¼‰

```bash
# è¡Œ461-482ï¼ˆã‚­ãƒ¥ãƒ¼æ–¹å¼ï¼‰
# STEP 1: audit_status ã‚’ pending ã«æ›´æ–°ï¼ˆå¿…ãšå®Ÿè¡Œï¼‰
python3 scripts/botsunichiroku.py subtask update SUBTASK_ID --audit-status pending

# STEP 2: ãŠé‡å­ãŒç©ºã„ã¦ã„ã‚‹ã‹ç¢ºèªï¼ˆin_progress ã®ç›£æŸ»ãŒãªã„ã‹ï¼‰
python3 scripts/botsunichiroku.py subtask list --json | python3 -c "
import json, sys
data = json.load(sys.stdin)
busy = [s for s in data if s.get('audit_status') == 'in_progress']
print('BUSY' if busy else 'IDLE')
"

# STEP 3: åˆ¤å®š
#   â†’ IDLE ã®å ´åˆ: ãŠé‡å­ã«send-keysã§ç›£æŸ»ä¾é ¼ã‚’é€ã‚‹
#   â†’ BUSY ã®å ´åˆ: send-keysã¯é€ã‚‰ãªã„ï¼ˆpendingã®ã¾ã¾å¾…æ©Ÿï¼‰
```

**IDLEã®å ´åˆã®ã¿** ãŠé‡å­ã«send-keysï¼ˆè¡Œ485-489ï¼‰:

```bash
# ã€1å›ç›®ã€‘
tmux send-keys -t ooku:agents.4 'subtask_XXX ã®ç›£æŸ»ã‚’ä¾é ¼ã™ã‚‹ã€‚python3 scripts/botsunichiroku.py subtask show subtask_XXX ã§ç¢ºèªã›ã‚ˆã€‚'
# ã€2å›ç›®ã€‘
tmux send-keys -t ooku:agents.4 Enter
```

---

### F. /clearãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼ˆ918-983è¡Œï¼‰

```bash
# è¡Œ925-963ï¼ˆ6ã‚¹ãƒ†ãƒƒãƒ—ï¼‰
# STEP 1: å ±å‘Šç¢ºèªãƒ»dashboardæ›´æ–°
python3 scripts/botsunichiroku.py report list --worker ashigaru{N}
# dashboard.md ã‚’æ›´æ–°

# STEP 2: æ¬¡ã‚¿ã‚¹ã‚¯ã‚’DBã«å…ˆè¡Œç™»éŒ²ï¼ˆDBå…ˆè¡Œç™»éŒ²åŸå‰‡ï¼‰
python3 scripts/botsunichiroku.py subtask add CMD_ID "èª¬æ˜" --worker ashigaru{N} --project PROJECT --target-path PATH --wave WAVE
# /clearå¾Œã«è¶³è»½ãŒDBã‹ã‚‰ã™ãèª­ã‚ã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã€å…ˆã«ç™»éŒ²ã—ã¦ãŠã

# STEP 3: ãƒšã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™ï¼ˆè¶³è»½ã‚¢ã‚¤ãƒ‰ãƒ«ç¢ºèªå¾Œã«å®Ÿè¡Œï¼‰
tmux select-pane -t multiagent:agents.{N} -T "ashigaru{N} (ãƒ¢ãƒ‡ãƒ«å)"

# STEP 4: /clear ã‚’ send-keys ã§é€ã‚‹ï¼ˆ2å›ã«åˆ†ã‘ã‚‹ï¼‰
tmux send-keys -t multiagent:agents.{N} '/clear'
tmux send-keys -t multiagent:agents.{N} Enter

# STEP 5: è¶³è»½ã® /clear å®Œäº†ã‚’ç¢ºèª
tmux capture-pane -t <å¯¾è±¡ãƒšã‚¤ãƒ³> -p | tail -5

# STEP 6: ã‚¿ã‚¹ã‚¯èª­ã¿è¾¼ã¿æŒ‡ç¤ºã‚’ send-keys ã§é€ã‚‹ï¼ˆ2å›ã«åˆ†ã‘ã‚‹ï¼‰
tmux send-keys -t multiagent:agents.{N} 'python3 scripts/botsunichiroku.py subtask show SUBTASK_ID ã§ä»»å‹™ã‚’ç¢ºèªã—å®Ÿè¡Œã›ã‚ˆã€‚'
tmux send-keys -t multiagent:agents.{N} Enter
```

---

### G. ã‚³ãƒ³ãƒ‘ã‚¯ã‚·ãƒ§ãƒ³å¾©å¸°æ‰‹é †ï¼ˆ758-787è¡Œï¼‰

æ­£ãƒ‡ãƒ¼ã‚¿ï¼ˆä¸€æ¬¡æƒ…å ±ï¼‰ã®ç¢ºèªé †åº:

```bash
# è¡Œ763-774
# 1. queue/shogun_to_karo.yaml â€” å°†è»ã‹ã‚‰ã®æŒ‡ç¤ºã‚­ãƒ¥ãƒ¼
# 2. æ²¡æ—¥éŒ²DBï¼ˆsubtask listï¼‰â€” å„è¶³è»½ã¸ã®å‰²å½“ã¦çŠ¶æ³
python3 scripts/botsunichiroku.py subtask list --status assigned

# 3. æ²¡æ—¥éŒ²DBï¼ˆreport listï¼‰â€” è¶³è»½ã‹ã‚‰ã®å ±å‘Š
python3 scripts/botsunichiroku.py report list

# 4. Memory MCPï¼ˆread_graphï¼‰â€” ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®è¨­å®šãƒ»æ®¿ã®å¥½ã¿
# 5. context/{project}.md â€” ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®çŸ¥è¦‹
```

---

## (2) ã‚¿ã‚¹ã‚¯å‰²å½“ãƒ•ãƒ­ãƒ¼æ”¹ä¿®æ¡ˆï¼ˆDB â†’ inbox YAMLï¼‰

### ç¾è¡Œæ–¹å¼ï¼ˆDBç›´æ¥æ›¸ãè¾¼ã¿ï¼‰

```
å®¶è€ãŒã‚¿ã‚¹ã‚¯åˆ†è§£
  â”‚
  â–¼ python3 scripts/botsunichiroku.py subtask add CMD_ID "èª¬æ˜" --worker ashigaru1 ...
  â”‚   â†’ æ²¡æ—¥éŒ²DBã«ç›´æ¥æ›¸ãè¾¼ã¿ï¼ˆsubtasks ãƒ†ãƒ¼ãƒ–ãƒ«ã« INSERTï¼‰
  â”‚
  â–¼ tmux send-keys ã§è¶³è»½èµ·ã“ã—
  â”‚
  â–¼ è¶³è»½ãŒ subtask show SUBTASK_ID ã§DBã‹ã‚‰èª­ã¿è¾¼ã¿
  â”‚
  â–¼ ä½œæ¥­é–‹å§‹
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- å˜ç´”ï¼ˆ1ç®‡æ‰€ã«ã ã‘æ›¸ãè¾¼ã‚€ï¼‰
- é€šä¿¡ãƒ­ã‚¹ãƒˆå¯¾ç­–ãŒå®¹æ˜“ï¼ˆDBã«è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã‚¹ã‚­ãƒ£ãƒ³ã™ã‚Œã°ç™ºè¦‹å¯èƒ½ï¼‰
- ä¸¦è¡Œæ›¸ãè¾¼ã¿å®‰å…¨ï¼ˆSQLiteã®æ’ä»–åˆ¶å¾¡ï¼‰

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:
- ãƒ‡ãƒãƒƒã‚°æ™‚ã«SQLã‚¯ã‚¨ãƒªãŒå¿…è¦
- Gitç®¡ç†ã§ããªã„ï¼ˆãƒã‚¤ãƒŠãƒªDBï¼‰

---

### æ”¹ä¿®æ¡ˆï¼ˆinbox YAMLæ–¹å¼ï¼‰

```
å®¶è€ãŒã‚¿ã‚¹ã‚¯åˆ†è§£
  â”‚
  â–¼ queue/inbox/ashigaru1.yaml ã«æ›¸ãè¾¼ã¿ï¼ˆYAML appendï¼‰
  â”‚   status: assigned
  â”‚   subtask_id: (è‡ªå‹•æ¡ç•ª or UUID)
  â”‚   cmd_id: cmd_127
  â”‚   description: "..."
  â”‚   project: shogun
  â”‚   target_path: /home/yasu/multi-agent-shogun
  â”‚   wave: 1
  â”‚   needs_audit: false
  â”‚   assigned_at: 2026-02-08T10:59:49
  â”‚
  â–¼ tmux send-keys ã§è¶³è»½èµ·ã“ã—
  â”‚
  â–¼ è¶³è»½ãŒ queue/inbox/ashigaru1.yaml ã‚’èª­ã¿è¾¼ã¿
  â”‚   - status: assigned ã®ã‚¨ãƒ³ãƒˆãƒªã‚’æ¢ã™
  â”‚   - è‡ªåˆ†ã®ç•ªå·ï¼ˆashigaru1ï¼‰ã®YAMLã®ã¿èª­ã‚€
  â”‚
  â–¼ ä½œæ¥­é–‹å§‹
  â”‚
  â–¼ å®Œäº†å¾Œã€queue/outbox/ashigaru1_report.yaml ã«å ±å‘Šæ›¸ãè¾¼ã¿
  â”‚   subtask_id: subtask_295
  â”‚   worker: ashigaru1
  â”‚   status: done
  â”‚   summary: "..."
  â”‚   skill_name: (optional)
  â”‚   skill_desc: (optional)
  â”‚   reported_at: 2026-02-08T12:30:00
  â”‚
  â–¼ tmux send-keys ã§å®¶è€èµ·ã“ã—
  â”‚
  â–¼ å®¶è€ãŒ queue/outbox/ashigaru1_report.yaml ã‚’ã‚¹ã‚­ãƒ£ãƒ³
  â”‚   - æœªå‡¦ç†ã®å ±å‘Šï¼ˆinboxå´ã® status: assignedï¼‰ã‚’æ¢ã™
  â”‚   - inbox YAML ã® status ã‚’ done ã«æ›´æ–°
  â”‚   - dashboard.md ã‚’æ›´æ–°
  â”‚
  â–¼ ã€ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã€‘å®¶è€ãŒå®Œäº†ã‚¿ã‚¹ã‚¯ã‚’æ²¡æ—¥éŒ²DBã«æ°¸ç¶šåŒ–
  â”‚   python3 scripts/botsunichiroku.py subtask archive subtask_295
  â”‚   â†’ DBã« INSERT
  â”‚   â†’ inbox/outbox YAML ã‹ã‚‰å‰Šé™¤ï¼ˆã¾ãŸã¯ archive/ ã«ç§»å‹•ï¼‰
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- äººé–“ãŒèª­ã¿ã‚„ã™ã„ï¼ˆãƒ‡ãƒãƒƒã‚°å®¹æ˜“ï¼‰
- Gitç®¡ç†å¯èƒ½ï¼ˆãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- YAML diff ã§ã‚¿ã‚¹ã‚¯å±¥æ­´è¿½è·¡å¯èƒ½

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:
- **äºŒé‡ç®¡ç†ã®è² æ‹…**: YAMLã«æ›¸ãè¾¼ã¿ â†’ å®Œäº†å¾Œã«DBã«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
- **ä¸¦è¡Œæ›¸ãè¾¼ã¿ç«¶åˆ**: è¤‡æ•°è¶³è»½ãŒåŒæ™‚ã«å ±å‘Šã—ãŸå ´åˆã€YAMLãƒ•ã‚¡ã‚¤ãƒ«æ›¸ãè¾¼ã¿ç«¶åˆã®å¯èƒ½æ€§
  - å¯¾ç­–æ¡ˆ: è¶³è»½ã”ã¨ã« outbox YAML ã‚’åˆ†ã‘ã‚‹ï¼ˆashigaru1_report.yaml, ashigaru2_report.yaml, ...ï¼‰
  - å¯¾ç­–æ¡ˆ: ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆqueue/inbox/.lockï¼‰ã§ãƒ•ã‚¡ã‚¤ãƒ«ãƒ¬ãƒ™ãƒ«ã®æ’ä»–åˆ¶å¾¡
- **é€šä¿¡ãƒ­ã‚¹ãƒˆå¯¾ç­–ã®è¤‡é›‘åŒ–**: YAMLãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ç¢ºèª + status ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ç¢ºèªãŒå¿…è¦
- **å¾©å¸°æ‰‹é †ã®è¤‡é›‘åŒ–**: ã‚³ãƒ³ãƒ‘ã‚¯ã‚·ãƒ§ãƒ³å¾©å¸°æ™‚ã€YAMLã¨DBã®ä¸¡æ–¹ã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚‹

---

### å®¶è€è¦³ç‚¹ã§ã®æ¤œè¨¼çµæœï¼ˆã‚¿ã‚¹ã‚¯å‰²å½“ãƒ•ãƒ­ãƒ¼ï¼‰

| è¦³ç‚¹ | ç¾è¡Œï¼ˆDBç›´æ¥ï¼‰ | æ”¹ä¿®æ¡ˆï¼ˆYAML inboxï¼‰ | åˆ¤å®š |
|------|---------------|---------------------|------|
| **å®Ÿè£…ã‚³ã‚¹ãƒˆ** | ä½ï¼ˆæ—¢å­˜CLIä½¿ç”¨ï¼‰ | ä¸­ï¼ˆYAMLæ›¸ãè¾¼ã¿+èª­ã¿è¾¼ã¿+ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å‡¦ç†è¿½åŠ ï¼‰ | âš ï¸ æ”¹ä¿®æ¡ˆã¯å®Ÿè£…ã‚³ã‚¹ãƒˆãŒå¢—åŠ  |
| **é‹ç”¨è² æ‹…** | ä½ï¼ˆ1ç®‡æ‰€ã®ã¿ç®¡ç†ï¼‰ | é«˜ï¼ˆYAML + DB ã®äºŒé‡ç®¡ç†ï¼‰ | âŒ æ”¹ä¿®æ¡ˆã¯é‹ç”¨è² æ‹…ãŒå¤§å¹…ã«å¢—åŠ  |
| **ãƒ‡ãƒãƒƒã‚°å®¹æ˜“æ€§** | ä¸­ï¼ˆSQLã‚¯ã‚¨ãƒªå¿…è¦ï¼‰ | é«˜ï¼ˆYAMLã‚’ cat ã§èª­ã‚ã‚‹ï¼‰ | âœ… æ”¹ä¿®æ¡ˆãŒå„ªä½ |
| **ä¸¦è¡Œå®‰å…¨æ€§** | é«˜ï¼ˆSQLiteæ’ä»–åˆ¶å¾¡ï¼‰ | ä¸­ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ç«¶åˆãƒªã‚¹ã‚¯ï¼‰ | âš ï¸ æ”¹ä¿®æ¡ˆã¯æ’ä»–åˆ¶å¾¡ã®è¿½åŠ å®Ÿè£…ãŒå¿…è¦ |
| **é€šä¿¡ãƒ­ã‚¹ãƒˆå¯¾ç­–** | é«˜ï¼ˆDBã‚¹ã‚­ãƒ£ãƒ³ã§ç™ºè¦‹ï¼‰ | ä¸­ï¼ˆYAML statusç¢ºèªå¿…è¦ï¼‰ | âš ï¸ æ”¹ä¿®æ¡ˆã¯è¿½åŠ ç¢ºèªãƒ­ã‚¸ãƒƒã‚¯ãŒå¿…è¦ |
| **Gitç®¡ç†** | ä¸å¯ï¼ˆãƒã‚¤ãƒŠãƒªDBï¼‰ | å¯ï¼ˆãƒ†ã‚­ã‚¹ãƒˆYAMLï¼‰ | âœ… æ”¹ä¿®æ¡ˆãŒå„ªä½ |

**ç·åˆåˆ¤å®š**: âŒ **æ”¹ä¿®æ¡ˆã¯å®Ÿè£…ãƒ»é‹ç”¨ã‚³ã‚¹ãƒˆãŒé«˜ãã€ä¸¦è¡Œå®‰å…¨æ€§ãƒ»é€šä¿¡ãƒ­ã‚¹ãƒˆå¯¾ç­–ã§åŠ£ã‚‹**

---

### æ”¹ä¿®æ¡ˆã®æœ€å°å®Ÿè£…ï¼ˆãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ–¹å¼ï¼‰

äºŒé‡ç®¡ç†ã®è² æ‹…ã‚’è»½æ¸›ã™ã‚‹ãŸã‚ã€ä»¥ä¸‹ã®å¦¥å”æ¡ˆã‚’æç¤ºã™ã‚‹ï¼š

**å¦¥å”æ¡ˆA: é€²è¡Œä¸­ã‚¿ã‚¹ã‚¯ã®ã¿YAMLã€å®Œäº†æ¸ˆã¿ã‚¿ã‚¹ã‚¯ã¯å³åº§ã«DB**

```
å®¶è€ãŒã‚¿ã‚¹ã‚¯åˆ†è§£
  â”‚
  â–¼ queue/inbox/ashigaru1.yaml ã«æ›¸ãè¾¼ã¿ï¼ˆé€²è¡Œä¸­ã®ã¿ï¼‰
  â”‚
  â–¼ è¶³è»½ãŒå®Œäº†å¾Œã€queue/outbox/ashigaru1_report.yaml ã«å ±å‘Š
  â”‚
  â–¼ å®¶è€ãŒå ±å‘Šå—ä¿¡å¾Œã€å³åº§ã«DBã«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ï¼ˆsubtask + report ã‚’ INSERTï¼‰
  â”‚   â†’ inbox/outbox YAML ã‹ã‚‰å‰Šé™¤
  â”‚
  â–¼ é€²è¡Œä¸­ã‚¿ã‚¹ã‚¯ã®ã¿ YAML ã§ç®¡ç†ã€å®Œäº†æ¸ˆã¿ã‚¿ã‚¹ã‚¯ã¯DBã§æ°¸ç¶šåŒ–
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- YAML ã¯é€²è¡Œä¸­ã‚¿ã‚¹ã‚¯ã®ã¿ï¼ˆå°ã‚µã‚¤ã‚ºï¼‰
- å®Œäº†æ¸ˆã¿ã‚¿ã‚¹ã‚¯ã¯DBã§æ°¸ç¶šåŒ–ï¼ˆæ¤œç´¢å®¹æ˜“ï¼‰
- Git diff ã§é€²è¡Œä¸­ã‚¿ã‚¹ã‚¯ã®å¤‰åŒ–ã‚’è¿½è·¡å¯èƒ½

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:
- ä¾ç„¶ã¨ã—ã¦äºŒé‡ç®¡ç†ï¼ˆYAMLæ›¸ãè¾¼ã¿ + DBæ›¸ãè¾¼ã¿ï¼‰
- å®Ÿè£…ã‚³ã‚¹ãƒˆå¢—åŠ 

---

**å¦¥å”æ¡ˆB: YAML ã¯å°†è»â†’å®¶è€ã®ã¿ã€å®¶è€â†’è¶³è»½ã¯ç¾è¡ŒDBæ–¹å¼ç¶­æŒ**

```
å°†è» â†’ å®¶è€: queue/shogun_to_karo.yamlï¼ˆç¾è¡Œé€šã‚Šï¼‰
å®¶è€ â†’ è¶³è»½: æ²¡æ—¥éŒ²DBï¼ˆç¾è¡Œé€šã‚Šï¼‰
è¶³è»½ â†’ å®¶è€: æ²¡æ—¥éŒ²DBï¼ˆç¾è¡Œé€šã‚Šï¼‰
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- å®¶è€â†’è¶³è»½ã®é€šä¿¡ã¯ç¾è¡Œæ–¹å¼ç¶­æŒï¼ˆå®Ÿè£…ã‚³ã‚¹ãƒˆæœ€å°ï¼‰
- å°†è»â†’å®¶è€ã®ã¿YAMLï¼ˆäººé–“ãŒèª­ã¿ã‚„ã™ã„ï¼‰

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:
- è¶³è»½ã‹ã‚‰ã®ãƒ‡ãƒãƒƒã‚°å®¹æ˜“æ€§ã¯å‘ä¸Šã—ãªã„

---

## (3) å ±å‘Šå—ä¿¡ãƒ•ãƒ­ãƒ¼æ”¹ä¿®æ¡ˆï¼ˆDB â†’ outbox YAMLï¼‰

### ç¾è¡Œæ–¹å¼ï¼ˆDBç›´æ¥æ›¸ãè¾¼ã¿ï¼‰

```
è¶³è»½ãŒã‚¿ã‚¹ã‚¯å®Œäº†
  â”‚
  â–¼ python3 scripts/botsunichiroku.py report add SUBTASK_ID ashigaru1 --status done --summary "..."
  â”‚   â†’ æ²¡æ—¥éŒ²DBã«ç›´æ¥æ›¸ãè¾¼ã¿ï¼ˆreports ãƒ†ãƒ¼ãƒ–ãƒ«ã« INSERTï¼‰
  â”‚
  â–¼ tmux send-keys ã§å®¶è€èµ·ã“ã—
  â”‚
  â–¼ å®¶è€ãŒ python3 scripts/botsunichiroku.py report list ã§DBã‹ã‚‰èª­ã¿è¾¼ã¿
  â”‚   â†’ ç›´è¿‘20ä»¶ã®å ±å‘Šã‚’ã‚¹ã‚­ãƒ£ãƒ³
  â”‚   â†’ dashboard.md ã«æœªåæ˜ ã®å ±å‘ŠãŒã‚ã‚Œã°å‡¦ç†
  â”‚
  â–¼ dashboard.md æ›´æ–°
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- å˜ç´”ï¼ˆ1ç®‡æ‰€ã«ã ã‘æ›¸ãè¾¼ã‚€ï¼‰
- é€šä¿¡ãƒ­ã‚¹ãƒˆå¯¾ç­–ãŒå®¹æ˜“ï¼ˆDBã‚¹ã‚­ãƒ£ãƒ³ã§ç™ºè¦‹ï¼‰
- ä¸¦è¡Œæ›¸ãè¾¼ã¿å®‰å…¨ï¼ˆSQLiteã®æ’ä»–åˆ¶å¾¡ï¼‰

---

### æ”¹ä¿®æ¡ˆï¼ˆoutbox YAMLæ–¹å¼ï¼‰

```
è¶³è»½ãŒã‚¿ã‚¹ã‚¯å®Œäº†
  â”‚
  â–¼ queue/outbox/ashigaru1_report.yaml ã«å ±å‘Šæ›¸ãè¾¼ã¿ï¼ˆYAML appendï¼‰
  â”‚   subtask_id: subtask_295
  â”‚   worker: ashigaru1
  â”‚   status: done
  â”‚   summary: "..."
  â”‚   skill_name: (optional)
  â”‚   skill_desc: (optional)
  â”‚   reported_at: 2026-02-08T12:30:00
  â”‚
  â–¼ tmux send-keys ã§å®¶è€èµ·ã“ã—
  â”‚
  â–¼ å®¶è€ãŒ queue/outbox/*.yaml ã‚’å…¨ã‚¹ã‚­ãƒ£ãƒ³
  â”‚   â†’ å„ outbox YAML ã‚’èª­ã¿è¾¼ã¿
  â”‚   â†’ inbox YAML ã®è©²å½“ subtask ã® status ã‚’ done ã«æ›´æ–°
  â”‚   â†’ dashboard.md ã‚’æ›´æ–°
  â”‚
  â–¼ ã€ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã€‘å®¶è€ãŒå®Œäº†ã‚¿ã‚¹ã‚¯ã‚’æ²¡æ—¥éŒ²DBã«æ°¸ç¶šåŒ–
  â”‚   python3 scripts/botsunichiroku.py subtask archive subtask_295
  â”‚   python3 scripts/botsunichiroku.py report archive REPORT_ID
  â”‚   â†’ DBã« INSERT
  â”‚   â†’ inbox/outbox YAML ã‹ã‚‰å‰Šé™¤
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- äººé–“ãŒèª­ã¿ã‚„ã™ã„ï¼ˆãƒ‡ãƒãƒƒã‚°å®¹æ˜“ï¼‰
- Gitç®¡ç†å¯èƒ½

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:
- **å…¨outbox YAMLã®ã‚¹ã‚­ãƒ£ãƒ³ãŒå¿…è¦**: `queue/outbox/ashigaru1_report.yaml`, `ashigaru2_report.yaml`, ..., `ashigaru8_report.yaml` ã®8ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¯å›èª­ã¿è¾¼ã¿
  - ç¾è¡Œã®DBæ–¹å¼ã§ã¯ `report list` ã§ä¸€æ‹¬å–å¾—å¯èƒ½
- **inbox YAMLã® statusæ›´æ–°**: å ±å‘Šå—ä¿¡å¾Œã€inbox YAML ã®è©²å½“ subtask ã‚’æ¢ã—ã¦ status ã‚’ done ã«æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
- **ä¸¦è¡Œæ›¸ãè¾¼ã¿ç«¶åˆ**: è¤‡æ•°è¶³è»½ãŒåŒæ™‚ã«å ±å‘Šã—ãŸå ´åˆã€outbox YAML æ›¸ãè¾¼ã¿ç«¶åˆã®å¯èƒ½æ€§
  - å¯¾ç­–: è¶³è»½ã”ã¨ã« outbox YAML ã‚’åˆ†ã‘ã‚‹ï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰

---

### å®¶è€è¦³ç‚¹ã§ã®æ¤œè¨¼çµæœï¼ˆå ±å‘Šå—ä¿¡ãƒ•ãƒ­ãƒ¼ï¼‰

| è¦³ç‚¹ | ç¾è¡Œï¼ˆDBç›´æ¥ï¼‰ | æ”¹ä¿®æ¡ˆï¼ˆYAML outboxï¼‰ | åˆ¤å®š |
|------|---------------|----------------------|------|
| **å®Ÿè£…ã‚³ã‚¹ãƒˆ** | ä½ï¼ˆæ—¢å­˜CLIä½¿ç”¨ï¼‰ | ä¸­ï¼ˆYAMLæ›¸ãè¾¼ã¿+å…¨ã‚¹ã‚­ãƒ£ãƒ³+ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å‡¦ç†è¿½åŠ ï¼‰ | âš ï¸ æ”¹ä¿®æ¡ˆã¯å®Ÿè£…ã‚³ã‚¹ãƒˆãŒå¢—åŠ  |
| **é‹ç”¨è² æ‹…** | ä½ï¼ˆ1ç®‡æ‰€ã®ã¿ç®¡ç†ï¼‰ | é«˜ï¼ˆYAML + DB ã®äºŒé‡ç®¡ç† + inboxæ›´æ–°ï¼‰ | âŒ æ”¹ä¿®æ¡ˆã¯é‹ç”¨è² æ‹…ãŒå¤§å¹…ã«å¢—åŠ  |
| **ãƒ‡ãƒãƒƒã‚°å®¹æ˜“æ€§** | ä¸­ï¼ˆSQLã‚¯ã‚¨ãƒªå¿…è¦ï¼‰ | é«˜ï¼ˆYAMLã‚’ cat ã§èª­ã‚ã‚‹ï¼‰ | âœ… æ”¹ä¿®æ¡ˆãŒå„ªä½ |
| **ä¸¦è¡Œå®‰å…¨æ€§** | é«˜ï¼ˆSQLiteæ’ä»–åˆ¶å¾¡ï¼‰ | ä¸­ï¼ˆè¶³è»½ã”ã¨ã«YAMLåˆ†é›¢ã§ç·©å’Œï¼‰ | âš ï¸ æ”¹ä¿®æ¡ˆã¯æ’ä»–åˆ¶å¾¡ã®æ³¨æ„ãŒå¿…è¦ |
| **é€šä¿¡ãƒ­ã‚¹ãƒˆå¯¾ç­–** | é«˜ï¼ˆDBã‚¹ã‚­ãƒ£ãƒ³ã§ç™ºè¦‹ï¼‰ | ä¸­ï¼ˆå…¨outbox YAMLã‚¹ã‚­ãƒ£ãƒ³å¿…è¦ï¼‰ | âš ï¸ æ”¹ä¿®æ¡ˆã¯ã‚¹ã‚­ãƒ£ãƒ³å¯¾è±¡ãŒå¢—åŠ  |
| **ã‚¹ã‚­ãƒ£ãƒ³åŠ¹ç‡** | é«˜ï¼ˆSQL 1å›ã§å…¨å ±å‘Šå–å¾—ï¼‰ | ä½ï¼ˆ8ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å€‹åˆ¥èª­ã¿è¾¼ã¿ï¼‰ | âŒ æ”¹ä¿®æ¡ˆã¯åŠ¹ç‡ãŒåŠ£ã‚‹ |

**ç·åˆåˆ¤å®š**: âŒ **æ”¹ä¿®æ¡ˆã¯å®Ÿè£…ãƒ»é‹ç”¨ã‚³ã‚¹ãƒˆãŒé«˜ãã€ã‚¹ã‚­ãƒ£ãƒ³åŠ¹ç‡ã§åŠ£ã‚‹**

---

## (4) ãŠé‡å­é€£æºæ”¹ä¿®æ¡ˆï¼ˆç›£æŸ»ä¾é ¼ã®é€šä¿¡æ–¹å¼ï¼‰

### ç¾è¡Œæ–¹å¼ï¼ˆDBç›´æ¥æ›¸ãè¾¼ã¿ + send-keysï¼‰

```
å®¶è€ãŒè¶³è»½ã‹ã‚‰ã®å®Œäº†å ±å‘Šã‚’å—ä¿¡
  â”‚
  â–¼ subtask ã® needs_audit ã‚’ç¢ºèª
  â”‚   python3 scripts/botsunichiroku.py subtask show SUBTASK_ID
  â”‚
  â–¼ needs_audit=1 ãªã‚‰:
  â”‚   python3 scripts/botsunichiroku.py subtask update SUBTASK_ID --audit-status pending
  â”‚   â†’ DBã«æ›¸ãè¾¼ã¿
  â”‚
  â–¼ ãŠé‡å­ãŒç©ºã„ã¦ã„ã‚‹ã‹ç¢ºèª
  â”‚   python3 scripts/botsunichiroku.py subtask list --json | python3 -c "..."
  â”‚   â†’ audit_status=in_progress ã®subtaskãŒãªã„ã‹ç¢ºèª
  â”‚
  â–¼ IDLE ã®å ´åˆã®ã¿ send-keys ã§ãŠé‡å­èµ·ã“ã—
  â”‚   tmux send-keys -t ooku:agents.4 'subtask_XXX ã®ç›£æŸ»ã‚’ä¾é ¼ã™ã‚‹ã€‚...'
  â”‚
  â–¼ ãŠé‡å­ãŒ subtask show ã§DBã‹ã‚‰èª­ã¿è¾¼ã¿ã€ç›£æŸ»å®Ÿæ–½
  â”‚
  â–¼ ç›£æŸ»å®Œäº†å¾Œã€ãŠé‡å­ãŒDBã«çµæœæ›¸ãè¾¼ã¿
  â”‚   python3 scripts/botsunichiroku.py subtask update SUBTASK_ID --audit-status done
  â”‚   python3 scripts/botsunichiroku.py report add SUBTASK_ID ohariko --status done --summary "ç›£æŸ»çµæœ: ..."
  â”‚
  â–¼ send-keys ã§å®¶è€èµ·ã“ã—
  â”‚
  â–¼ å®¶è€ãŒ audit_status=done ã‚’ç¢ºèªã—ã€æ¬¡å‡¦ç†ã¸
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- ãŠé‡å­ã®BUSY/IDLEåˆ¤å®šãŒDB 1å›ã§å¯èƒ½
- ç›£æŸ»ä¾é ¼ã‚­ãƒ¥ãƒ¼ãŒDBã§ç®¡ç†ã•ã‚Œã‚‹ï¼ˆaudit_status=pendingï¼‰
- é€šä¿¡ãƒ­ã‚¹ãƒˆå¯¾ç­–ãŒå®¹æ˜“

---

### æ”¹ä¿®æ¡ˆï¼ˆinbox/outbox YAMLæ–¹å¼ï¼‰

```
å®¶è€ãŒè¶³è»½ã‹ã‚‰ã®å®Œäº†å ±å‘Šã‚’å—ä¿¡ï¼ˆoutbox YAMLï¼‰
  â”‚
  â–¼ inbox YAML ã®è©²å½“ subtask ã® needs_audit ã‚’ç¢ºèª
  â”‚
  â–¼ needs_audit=true ãªã‚‰:
  â”‚   queue/inbox/ohariko.yaml ã«ç›£æŸ»ä¾é ¼æ›¸ãè¾¼ã¿ï¼ˆYAML appendï¼‰
  â”‚   audit_id: audit_001
  â”‚   subtask_id: subtask_295
  â”‚   status: pending
  â”‚   requested_at: 2026-02-08T12:30:00
  â”‚
  â–¼ ãŠé‡å­ãŒç©ºã„ã¦ã„ã‚‹ã‹ç¢ºèª
  â”‚   queue/inbox/ohariko.yaml ã‚’èª­ã¿è¾¼ã¿
  â”‚   â†’ status: in_progress ã®ã‚¨ãƒ³ãƒˆãƒªãŒãªã„ã‹ç¢ºèª
  â”‚
  â–¼ IDLE ã®å ´åˆã®ã¿ send-keys ã§ãŠé‡å­èµ·ã“ã—
  â”‚
  â–¼ ãŠé‡å­ãŒ queue/inbox/ohariko.yaml ã‚’èª­ã¿è¾¼ã¿ã€status: pending ã‚’æ¢ã™
  â”‚   â†’ è©²å½“ã‚¨ãƒ³ãƒˆãƒªã® status ã‚’ in_progress ã«æ›´æ–°
  â”‚
  â–¼ ãŠé‡å­ãŒå¯¾è±¡ subtask ã® inbox YAML ã‚’èª­ã¿è¾¼ã¿ã€ç›£æŸ»å®Ÿæ–½
  â”‚
  â–¼ ç›£æŸ»å®Œäº†å¾Œã€ãŠé‡å­ãŒ queue/outbox/ohariko_report.yaml ã«çµæœæ›¸ãè¾¼ã¿
  â”‚   audit_id: audit_001
  â”‚   subtask_id: subtask_295
  â”‚   status: done
  â”‚   findings: "..."
  â”‚   reported_at: 2026-02-08T12:45:00
  â”‚
  â–¼ send-keys ã§å®¶è€èµ·ã“ã—
  â”‚
  â–¼ å®¶è€ãŒ queue/outbox/ohariko_report.yaml ã‚’èª­ã¿è¾¼ã¿ã€æ¬¡å‡¦ç†ã¸
  â”‚   â†’ inbox/ohariko.yaml ã®è©²å½“ã‚¨ãƒ³ãƒˆãƒªã‚’å‰Šé™¤
  â”‚
  â–¼ ã€ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã€‘å®¶è€ãŒå®Œäº†ç›£æŸ»ã‚’æ²¡æ—¥éŒ²DBã«æ°¸ç¶šåŒ–
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- ç›£æŸ»ä¾é ¼ãŒYAMLã§å¯è¦–åŒ–ã•ã‚Œã‚‹ï¼ˆãƒ‡ãƒãƒƒã‚°å®¹æ˜“ï¼‰

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:
- **ãŠé‡å­ã®BUSY/IDLEåˆ¤å®šãŒè¤‡é›‘åŒ–**: queue/inbox/ohariko.yaml ã‚’èª­ã¿è¾¼ã‚“ã§ status: in_progress ã®ã‚¨ãƒ³ãƒˆãƒªã‚’æ¢ã™å¿…è¦ãŒã‚ã‚‹
- **inbox YAML ã® statusæ›´æ–°**: ãŠé‡å­ãŒ status ã‚’ pending â†’ in_progress â†’ done ã¨æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼ˆ3å›æ›¸ãè¾¼ã¿ï¼‰
- **å®¶è€ã®å‡¦ç†ãŒè¤‡é›‘åŒ–**: outbox YAML ã‹ã‚‰ç›£æŸ»çµæœã‚’èª­ã¿è¾¼ã¿ã€inbox YAML ã®ã‚¨ãƒ³ãƒˆãƒªã‚’å‰Šé™¤ã™ã‚‹å‡¦ç†ãŒå¿…è¦

---

### å®¶è€è¦³ç‚¹ã§ã®æ¤œè¨¼çµæœï¼ˆãŠé‡å­é€£æºï¼‰

| è¦³ç‚¹ | ç¾è¡Œï¼ˆDBç›´æ¥ï¼‰ | æ”¹ä¿®æ¡ˆï¼ˆYAML inbox/outboxï¼‰ | åˆ¤å®š |
|------|---------------|---------------------------|------|
| **å®Ÿè£…ã‚³ã‚¹ãƒˆ** | ä½ï¼ˆæ—¢å­˜CLIä½¿ç”¨ï¼‰ | é«˜ï¼ˆYAMLèª­ã¿æ›¸ã+statusæ›´æ–°+ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å‡¦ç†ï¼‰ | âŒ æ”¹ä¿®æ¡ˆã¯å®Ÿè£…ã‚³ã‚¹ãƒˆãŒå¤§å¹…ã«å¢—åŠ  |
| **é‹ç”¨è² æ‹…** | ä½ï¼ˆ1ç®‡æ‰€ã®ã¿ç®¡ç†ï¼‰ | é«˜ï¼ˆYAML + DB ã®äºŒé‡ç®¡ç† + statusæ›´æ–°ï¼‰ | âŒ æ”¹ä¿®æ¡ˆã¯é‹ç”¨è² æ‹…ãŒå¤§å¹…ã«å¢—åŠ  |
| **BUSY/IDLEåˆ¤å®š** | é«˜ï¼ˆSQL 1å›ï¼‰ | ä¸­ï¼ˆYAMLèª­ã¿è¾¼ã¿+filterï¼‰ | âš ï¸ æ”¹ä¿®æ¡ˆã¯åŠ¹ç‡ãŒåŠ£ã‚‹ |
| **ç›£æŸ»ã‚­ãƒ¥ãƒ¼ç®¡ç†** | é«˜ï¼ˆaudit_status ã§ç®¡ç†ï¼‰ | ä¸­ï¼ˆstatus: pending/in_progress ã§ç®¡ç†ï¼‰ | âš ï¸ æ”¹ä¿®æ¡ˆã¯è¤‡é›‘åŒ– |
| **ãƒ‡ãƒãƒƒã‚°å®¹æ˜“æ€§** | ä¸­ï¼ˆSQLã‚¯ã‚¨ãƒªå¿…è¦ï¼‰ | é«˜ï¼ˆYAMLã‚’ cat ã§èª­ã‚ã‚‹ï¼‰ | âœ… æ”¹ä¿®æ¡ˆãŒå„ªä½ |

**ç·åˆåˆ¤å®š**: âŒ **æ”¹ä¿®æ¡ˆã¯å®Ÿè£…ãƒ»é‹ç”¨ã‚³ã‚¹ãƒˆãŒé«˜ãã€åŠ¹ç‡ã§åŠ£ã‚‹**

---

## (5) DBæ›¸ãè¾¼ã¿ã®æ–°ã‚»ã‚¯ã‚·ãƒ§ãƒ³æ¡ˆï¼ˆcmdå®Œäº†æ™‚ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ‰‹é †ï¼‰

### ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã‚¿ã‚¤ãƒŸãƒ³ã‚°

æ”¹ä¿®æ¡ˆã§ã¯ã€ä»¥ä¸‹ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å®¶è€ãŒYAMLã‹ã‚‰æ²¡æ—¥éŒ²DBã«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã™ã‚‹ï¼š

1. **subtaskå®Œäº†æ™‚**: è¶³è»½ã‹ã‚‰ã®å ±å‘Šå—ä¿¡å¾Œã€å³åº§ã«DBã«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
2. **ç›£æŸ»å®Œäº†æ™‚**: ãŠé‡å­ã‹ã‚‰ã®ç›£æŸ»çµæœå—ä¿¡å¾Œã€å³åº§ã«DBã«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
3. **cmdå®Œäº†æ™‚**: å…¨subtaskå®Œäº†å¾Œã€cmdè‡ªä½“ã‚’DBã«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–

### ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ‰‹é †ï¼ˆæ–°ã‚»ã‚¯ã‚·ãƒ§ãƒ³æ¡ˆï¼‰

```markdown
## ğŸ”´ YAMLâ†’DB ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ‰‹é †ï¼ˆé€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«v2ï¼‰

### ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°

ä»¥ä¸‹ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã€å®¶è€ã¯é€²è¡Œä¸­ã‚¿ã‚¹ã‚¯ï¼ˆinbox/outbox YAMLï¼‰ã‚’æ²¡æ—¥éŒ²DBã«æ°¸ç¶šåŒ–ã›ã‚ˆï¼š

1. **subtaskå®Œäº†æ™‚**: è¶³è»½ã‹ã‚‰ã®å ±å‘Šå—ä¿¡å¾Œã€å³åº§ã«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
2. **ç›£æŸ»å®Œäº†æ™‚**: ãŠé‡å­ã‹ã‚‰ã®ç›£æŸ»çµæœå—ä¿¡å¾Œã€å³åº§ã«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
3. **cmdå®Œäº†æ™‚**: å…¨subtaskå®Œäº†å¾Œã€cmdè‡ªä½“ã‚’ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–

### ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ‰‹é †ï¼ˆsubtaskå®Œäº†æ™‚ï¼‰

```bash
# STEP 1: outbox YAML ã‹ã‚‰å ±å‘Šã‚’èª­ã¿è¾¼ã¿
cat queue/outbox/ashigaru1_report.yaml

# STEP 2: inbox YAML ã‹ã‚‰å¯¾å¿œã™ã‚‹ subtask ã‚’èª­ã¿è¾¼ã¿
# ï¼ˆsubtask_id ã§æ¤œç´¢ï¼‰

# STEP 3: æ²¡æ—¥éŒ²DBã« subtask + report ã‚’ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
python3 scripts/botsunichiroku.py subtask archive \
  --subtask-id subtask_295 \
  --worker ashigaru1 \
  --status done \
  --summary "..." \
  --skill-name "..." \
  --skill-desc "..." \
  --cmd-id cmd_127 \
  --project shogun \
  --target-path "/home/yasu/multi-agent-shogun" \
  --wave 1 \
  --needs-audit false \
  --assigned-at "2026-02-08T10:59:49" \
  --completed-at "2026-02-08T12:30:00"

# STEP 4: inbox YAML ã‹ã‚‰è©²å½“ subtask ã‚’å‰Šé™¤
# ï¼ˆã¾ãŸã¯ status: done ã«æ›´æ–°ã—ã€å¾Œã§ä¸€æ‹¬å‰Šé™¤ï¼‰

# STEP 5: outbox YAML ã‹ã‚‰è©²å½“ report ã‚’å‰Šé™¤

# STEP 6: dashboard.md ã‚’æ›´æ–°
```

### ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ‰‹é †ï¼ˆcmdå®Œäº†æ™‚ï¼‰

```bash
# å…¨ subtask ãŒå®Œäº†ã—ãŸã‚‰ã€cmdè‡ªä½“ã‚’ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–

# STEP 1: è©²å½“ cmd ã®å…¨ subtask ãŒ done ã‹ç¢ºèª
python3 scripts/botsunichiroku.py subtask list --cmd cmd_127
# â†’ å…¨ã¦ status: done ãªã‚‰æ¬¡ã¸

# STEP 2: queue/shogun_to_karo.yaml ã®è©²å½“ cmd ã® status ã‚’ done ã«æ›´æ–°

# STEP 3: æ²¡æ—¥éŒ²DBã« cmd ã‚’ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
python3 scripts/botsunichiroku.py cmd archive cmd_127

# STEP 4: è©²å½“ cmd ã®å…¨ subtask ã‚’ inbox YAML ã‹ã‚‰å‰Šé™¤ï¼ˆã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼‰
```

### ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å¾Œã®ç¢ºèª

```bash
# DBã«æ­£ã—ãã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã•ã‚ŒãŸã‹ç¢ºèª
python3 scripts/botsunichiroku.py subtask show subtask_295
python3 scripts/botsunichiroku.py report list --subtask subtask_295
python3 scripts/botsunichiroku.py cmd show cmd_127

# inbox/outbox YAML ãŒç©ºã«ãªã£ãŸã‹ç¢ºèª
cat queue/inbox/ashigaru1.yaml
cat queue/outbox/ashigaru1_report.yaml
```

### YAMLã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãƒãƒªã‚·ãƒ¼

- **é€²è¡Œä¸­ã‚¿ã‚¹ã‚¯ã®ã¿YAMLã«ä¿æŒ**: status: assigned, in_progress
- **å®Œäº†ã‚¿ã‚¹ã‚¯ã¯å³åº§ã«DBã«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–**: status: done â†’ DB INSERT â†’ YAMLå‰Šé™¤
- **YAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã®ä¸Šé™**: å„ inbox/outbox YAML ã¯æœ€å¤§10ã‚¨ãƒ³ãƒˆãƒªã¾ã§
  - è¶…éã—ãŸå ´åˆã€å¤ã„å®Œäº†ã‚¨ãƒ³ãƒˆãƒªã‹ã‚‰é †ã«DBã«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã—ã¦å‰Šé™¤
```

---

### å®¶è€è¦³ç‚¹ã§ã®æ¤œè¨¼çµæœï¼ˆã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ‰‹é †ï¼‰

| è¦³ç‚¹ | è©•ä¾¡ |
|------|------|
| **å®Ÿè£…ã‚³ã‚¹ãƒˆ** | âŒ é«˜ï¼ˆYAMLèª­ã¿è¾¼ã¿ â†’ DBæ›¸ãè¾¼ã¿ â†’ YAMLå‰Šé™¤ ã®ä¸€é€£ã®å‡¦ç†ï¼‰ |
| **é‹ç”¨è² æ‹…** | âŒ é«˜ï¼ˆæ¯å›ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å‡¦ç†ãŒå¿…è¦ï¼‰ |
| **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°** | âš ï¸ YAMLå‰Šé™¤å¤±æ•—æ™‚ã®ãƒªã‚«ãƒãƒªå‡¦ç†ãŒå¿…è¦ |
| **åŸå­æ€§** | âš ï¸ DBæ›¸ãè¾¼ã¿ã¨YAMLå‰Šé™¤ã®é–“ã«å¤±æ•—ã—ãŸå ´åˆã€äºŒé‡ç™»éŒ²ã®ãƒªã‚¹ã‚¯ |
| **ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ä¿è¨¼** | âŒ YAMLå‰Šé™¤ã¯ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã®ãŸã‚ã€DBãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã¨ä¸€ä½“åŒ–ã§ããªã„ |

**ç·åˆåˆ¤å®š**: âŒ **ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ‰‹é †ã¯å®Ÿè£…ãƒ»é‹ç”¨ã‚³ã‚¹ãƒˆãŒé«˜ãã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒè¤‡é›‘**

---

## (6) /clearãƒ—ãƒ­ãƒˆã‚³ãƒ«æ”¹ä¿®æ¡ˆï¼ˆDBå…ˆè¡Œç™»éŒ² â†’ YAMLå…ˆè¡Œæ›¸ãè¾¼ã¿ï¼‰

### ç¾è¡Œæ–¹å¼ï¼ˆDBå…ˆè¡Œç™»éŒ²ï¼‰

```bash
# è¡Œ936-938
# STEP 2: æ¬¡ã‚¿ã‚¹ã‚¯ã‚’DBã«å…ˆè¡Œç™»éŒ²ï¼ˆDBå…ˆè¡Œç™»éŒ²åŸå‰‡ï¼‰
python3 scripts/botsunichiroku.py subtask add CMD_ID "èª¬æ˜" --worker ashigaru{N} --project PROJECT --target-path PATH --wave WAVE
# /clearå¾Œã«è¶³è»½ãŒDBã‹ã‚‰ã™ãèª­ã‚ã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã€å…ˆã«ç™»éŒ²ã—ã¦ãŠã
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- /clearå¾Œã®è¶³è»½ãŒ subtask show ã§å³åº§ã«ã‚¿ã‚¹ã‚¯ã‚’èª­ã¿è¾¼ã‚ã‚‹
- å®¶è€ãŒã‚¿ã‚¹ã‚¯ã‚’å‰²ã‚Šå½“ã¦ãŸã“ã¨ãŒDBã«è¨˜éŒ²ã•ã‚Œã‚‹ï¼ˆé€šä¿¡ãƒ­ã‚¹ãƒˆå¯¾ç­–ï¼‰

---

### æ”¹ä¿®æ¡ˆï¼ˆYAMLå…ˆè¡Œæ›¸ãè¾¼ã¿ï¼‰

```bash
# STEP 2: æ¬¡ã‚¿ã‚¹ã‚¯ã‚’ inbox YAML ã«å…ˆè¡Œæ›¸ãè¾¼ã¿ï¼ˆYAMLå…ˆè¡Œæ›¸ãè¾¼ã¿åŸå‰‡ï¼‰
cat >> queue/inbox/ashigaru1.yaml <<EOF
- subtask_id: subtask_296
  cmd_id: cmd_127
  worker: ashigaru1
  status: assigned
  description: "æ¬¡ã®ã‚¿ã‚¹ã‚¯èª¬æ˜"
  project: shogun
  target_path: /home/yasu/multi-agent-shogun
  wave: 2
  needs_audit: false
  assigned_at: 2026-02-08T13:00:00
EOF

# /clearå¾Œã«è¶³è»½ãŒ queue/inbox/ashigaru1.yaml ã‹ã‚‰ã™ãèª­ã‚ã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã€å…ˆã«æ›¸ãè¾¼ã‚“ã§ãŠã
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- /clearå¾Œã®è¶³è»½ãŒ inbox YAML ã‹ã‚‰å³åº§ã«ã‚¿ã‚¹ã‚¯ã‚’èª­ã¿è¾¼ã‚ã‚‹

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:
- **YAMLæ›¸ãè¾¼ã¿ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒªã‚«ãƒãƒª**: ãƒ•ã‚¡ã‚¤ãƒ«æ›¸ãè¾¼ã¿å¤±æ•—æ™‚ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒå¿…è¦
- **ä¸¦è¡Œæ›¸ãè¾¼ã¿ç«¶åˆ**: å®¶è€ãŒè¤‡æ•°ã®è¶³è»½ã«åŒæ™‚ã« /clear ã‚’é€ã‚‹å ´åˆã€è¤‡æ•°ã® inbox YAML ã¸ã®æ›¸ãè¾¼ã¿ãŒä¸¦è¡Œç™ºç”Ÿ
  - å¯¾ç­–: è¶³è»½ã”ã¨ã« inbox YAML ã‚’åˆ†ã‘ã¦ã„ã‚‹ãŸã‚ã€ç«¶åˆã¯ç™ºç”Ÿã—ãªã„

---

### æ”¹ä¿®å¾Œã® /clear ãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼ˆ6ã‚¹ãƒ†ãƒƒãƒ—ï¼‰

```bash
# STEP 1: å ±å‘Šç¢ºèªãƒ»dashboardæ›´æ–°
# ï¼ˆoutbox YAML ã‚’ã‚¹ã‚­ãƒ£ãƒ³ï¼‰

# STEP 2: æ¬¡ã‚¿ã‚¹ã‚¯ã‚’ inbox YAML ã«å…ˆè¡Œæ›¸ãè¾¼ã¿ï¼ˆYAMLå…ˆè¡Œæ›¸ãè¾¼ã¿åŸå‰‡ï¼‰
cat >> queue/inbox/ashigaru1.yaml <<EOF
- subtask_id: subtask_296
  cmd_id: cmd_127
  worker: ashigaru1
  status: assigned
  description: "æ¬¡ã®ã‚¿ã‚¹ã‚¯èª¬æ˜"
  project: shogun
  target_path: /home/yasu/multi-agent-shogun
  wave: 2
  needs_audit: false
  assigned_at: 2026-02-08T13:00:00
EOF

# STEP 3: ãƒšã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™ï¼ˆè¶³è»½ã‚¢ã‚¤ãƒ‰ãƒ«ç¢ºèªå¾Œã«å®Ÿè¡Œï¼‰
tmux select-pane -t multiagent:agents.1 -T "ashigaru1 (ãƒ¢ãƒ‡ãƒ«å)"

# STEP 4: /clear ã‚’ send-keys ã§é€ã‚‹ï¼ˆ2å›ã«åˆ†ã‘ã‚‹ï¼‰
tmux send-keys -t multiagent:agents.1 '/clear'
tmux send-keys -t multiagent:agents.1 Enter

# STEP 5: è¶³è»½ã® /clear å®Œäº†ã‚’ç¢ºèª
tmux capture-pane -t multiagent:agents.1 -p | tail -5

# STEP 6: ã‚¿ã‚¹ã‚¯èª­ã¿è¾¼ã¿æŒ‡ç¤ºã‚’ send-keys ã§é€ã‚‹ï¼ˆ2å›ã«åˆ†ã‘ã‚‹ï¼‰
# ã€å¤‰æ›´ç‚¹ã€‘DBèª­ã¿è¾¼ã¿ã§ã¯ãªãã€inbox YAMLèª­ã¿è¾¼ã¿æŒ‡ç¤ºã«å¤‰æ›´
tmux send-keys -t multiagent:agents.1 'queue/inbox/ashigaru1.yaml ã‹ã‚‰status: assigned ã®ã‚¿ã‚¹ã‚¯ã‚’èª­ã¿è¾¼ã¿å®Ÿè¡Œã›ã‚ˆã€‚'
tmux send-keys -t multiagent:agents.1 Enter
```

---

### å®¶è€è¦³ç‚¹ã§ã®æ¤œè¨¼çµæœï¼ˆ/clearãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼‰

| è¦³ç‚¹ | ç¾è¡Œï¼ˆDBå…ˆè¡Œç™»éŒ²ï¼‰ | æ”¹ä¿®æ¡ˆï¼ˆYAMLå…ˆè¡Œæ›¸ãè¾¼ã¿ï¼‰ | åˆ¤å®š |
|------|-------------------|--------------------------|------|
| **å®Ÿè£…ã‚³ã‚¹ãƒˆ** | ä½ï¼ˆæ—¢å­˜CLIä½¿ç”¨ï¼‰ | ä¸­ï¼ˆYAMLæ›¸ãè¾¼ã¿å‡¦ç†è¿½åŠ ï¼‰ | âš ï¸ æ”¹ä¿®æ¡ˆã¯å®Ÿè£…ã‚³ã‚¹ãƒˆãŒå¢—åŠ  |
| **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°** | é«˜ï¼ˆDBæ›¸ãè¾¼ã¿å¤±æ•—ã¯SQLiteãŒæ¤œå‡ºï¼‰ | ä¸­ï¼ˆYAMLæ›¸ãè¾¼ã¿å¤±æ•—ã®æ¤œå‡ºãŒå¿…è¦ï¼‰ | âš ï¸ æ”¹ä¿®æ¡ˆã¯è¿½åŠ å®Ÿè£…ãŒå¿…è¦ |
| **ä¸¦è¡Œå®‰å…¨æ€§** | é«˜ï¼ˆSQLiteæ’ä»–åˆ¶å¾¡ï¼‰ | é«˜ï¼ˆè¶³è»½ã”ã¨ã«YAMLåˆ†é›¢ï¼‰ | âœ… æ”¹ä¿®æ¡ˆã‚‚å®‰å…¨ |
| **è¶³è»½ã®èª­ã¿è¾¼ã¿æŒ‡ç¤º** | å˜ç´”ï¼ˆsubtask show SUBTASK_IDï¼‰ | è¤‡é›‘ï¼ˆYAMLèª­ã¿è¾¼ã¿+status: assignedæ¤œç´¢ï¼‰ | âš ï¸ æ”¹ä¿®æ¡ˆã¯è¶³è»½ã®è² æ‹…ãŒå¢—åŠ  |

**ç·åˆåˆ¤å®š**: âš ï¸ **æ”¹ä¿®æ¡ˆã¯å®Ÿè£…å¯èƒ½ã ãŒã€è¶³è»½ã®èª­ã¿è¾¼ã¿å‡¦ç†ãŒè¤‡é›‘åŒ–**

---

## ç·åˆè©•ä¾¡: é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«v2ï¼ˆYAML inboxæ–¹å¼ï¼‰ã®å®Ÿç¾å¯èƒ½æ€§

### å®¶è€è¦³ç‚¹ã§ã®ç·åˆåˆ¤å®š

| é …ç›® | è©•ä¾¡ | ç†ç”± |
|------|------|------|
| **å®Ÿè£…ã‚³ã‚¹ãƒˆ** | âŒ é«˜ | YAMLèª­ã¿æ›¸ãã€ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å‡¦ç†ã€ã‚¹ã‚­ãƒ£ãƒ³å‡¦ç†ã®å…¨é¢æ”¹ä¿®ãŒå¿…è¦ |
| **é‹ç”¨è² æ‹…** | âŒ éå¸¸ã«é«˜ | YAML + DB ã®äºŒé‡ç®¡ç†ã€inbox/outbox YAMLã®statusæ›´æ–°ã€å®šæœŸçš„ãªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãŒå¿…è¦ |
| **ä¸¦è¡Œå®‰å…¨æ€§** | âš ï¸ ä¸­ | è¶³è»½ã”ã¨ã«YAMLåˆ†é›¢ã§ç·©å’Œã•ã‚Œã‚‹ãŒã€ãƒ•ã‚¡ã‚¤ãƒ«ç«¶åˆãƒªã‚¹ã‚¯ã¯æ®‹ã‚‹ |
| **é€šä¿¡ãƒ­ã‚¹ãƒˆå¯¾ç­–** | âš ï¸ ä¸­ | å…¨outbox YAMLã‚¹ã‚­ãƒ£ãƒ³ãŒå¿…è¦ã€ç¾è¡Œã®DBæ–¹å¼ã‚ˆã‚ŠåŠ¹ç‡ãŒåŠ£ã‚‹ |
| **ãƒ‡ãƒãƒƒã‚°å®¹æ˜“æ€§** | âœ… é«˜ | YAMLã‚’ cat ã§èª­ã‚ã‚‹ã€Gitç®¡ç†å¯èƒ½ |
| **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°** | âŒ è¤‡é›‘ | YAMLæ›¸ãè¾¼ã¿å¤±æ•—ã€ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å¤±æ•—æ™‚ã®ãƒªã‚«ãƒãƒªå‡¦ç†ãŒè¤‡é›‘ |
| **åŸå­æ€§ä¿è¨¼** | âŒ å›°é›£ | YAMLå‰Šé™¤ã¨DBæ›¸ãè¾¼ã¿ã®é–“ã«å¤±æ•—ã—ãŸå ´åˆã€äºŒé‡ç™»éŒ²ã®ãƒªã‚¹ã‚¯ |

### æœ€çµ‚åˆ¤å®š

**âŒ é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«v2ï¼ˆYAML inboxæ–¹å¼ï¼‰ã¯å®¶è€è¦³ç‚¹ã§å®Ÿç¾ã‚³ã‚¹ãƒˆãŒé«˜ãã€é‹ç”¨è² æ‹…ãŒå¤§å¹…ã«å¢—åŠ ã™ã‚‹ã€‚ç¾è¡Œã®DBç›´æ¥æ–¹å¼ã‚’ç¶­æŒã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã™ã‚‹ã€‚**

### ä»£æ›¿æ¡ˆ: ãƒ‡ãƒãƒƒã‚°å®¹æ˜“æ€§ã‚’å‘ä¸Šã•ã›ã‚‹æœ€å°æ”¹ä¿®

YAML inboxæ–¹å¼ã®å”¯ä¸€ã®ãƒ¡ãƒªãƒƒãƒˆã€Œãƒ‡ãƒãƒƒã‚°å®¹æ˜“æ€§ã€ã‚’ç¾è¡Œæ–¹å¼ã§å®Ÿç¾ã™ã‚‹ä»£æ›¿æ¡ˆï¼š

#### ä»£æ›¿æ¡ˆA: æ²¡æ—¥éŒ²DBãƒ€ãƒ³ãƒ—ã‚³ãƒãƒ³ãƒ‰ã®è¿½åŠ 

```bash
# é€²è¡Œä¸­ã‚¿ã‚¹ã‚¯ã‚’YAMLå½¢å¼ã§ãƒ€ãƒ³ãƒ—ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
python3 scripts/botsunichiroku.py subtask list --status assigned --format yaml > /tmp/assigned_tasks.yaml

# å®Œäº†æ¸ˆã¿å ±å‘Šã‚’YAMLå½¢å¼ã§ãƒ€ãƒ³ãƒ—ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
python3 scripts/botsunichiroku.py report list --format yaml > /tmp/reports.yaml
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- ãƒ‡ãƒãƒƒã‚°æ™‚ã«YAMLå½¢å¼ã§ç¢ºèªå¯èƒ½
- ç¾è¡Œã®DBæ–¹å¼ã‚’ç¶­æŒï¼ˆå®Ÿè£…ã‚³ã‚¹ãƒˆæœ€å°ï¼‰
- Gitç®¡ç†ã—ãŸã„å ´åˆã¯å®šæœŸçš„ã«ãƒ€ãƒ³ãƒ—ã—ã¦ commit

**å®Ÿè£…ã‚³ã‚¹ãƒˆ**: ä½ï¼ˆCLIã« `--format yaml` ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¿½åŠ ã®ã¿ï¼‰

---

#### ä»£æ›¿æ¡ˆB: æ²¡æ—¥éŒ²DBã®Web UIãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

```bash
# è»½é‡Webã‚µãƒ¼ãƒãƒ¼ã§DBå†…å®¹ã‚’ãƒ–ãƒ©ã‚¦ã‚¶è¡¨ç¤º
python3 scripts/botsunichiroku_web.py
# â†’ http://localhost:5000 ã§ã‚¢ã‚¯ã‚»ã‚¹
# â†’ é€²è¡Œä¸­ã‚¿ã‚¹ã‚¯ã€å®Œäº†æ¸ˆã¿å ±å‘Šã€ç›£æŸ»çŠ¶æ³ã‚’GUIã§ç¢ºèª
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- äººé–“ãŒèª­ã¿ã‚„ã™ã„GUI
- ç¾è¡Œã®DBæ–¹å¼ã‚’ç¶­æŒ
- ãƒ‡ãƒãƒƒã‚°æ™‚ã«ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèªå¯èƒ½

**å®Ÿè£…ã‚³ã‚¹ãƒˆ**: ä¸­ï¼ˆFlask + SQLiteé€£æºã®è»½é‡Webã‚¢ãƒ—ãƒªï¼‰

---

## æ¨å¥¨äº‹é …

å®¶è€ã¨ã—ã¦ã€ä»¥ä¸‹ã‚’ä¸Šæ§˜ã«é€²è¨€ã™ã‚‹ï¼š

1. **ç¾è¡Œã®DBç›´æ¥æ–¹å¼ã‚’ç¶­æŒã™ã‚‹**: å®Ÿè£…ã‚³ã‚¹ãƒˆãƒ»é‹ç”¨è² æ‹…ãƒ»ä¸¦è¡Œå®‰å…¨æ€§ãƒ»é€šä¿¡ãƒ­ã‚¹ãƒˆå¯¾ç­–ã®å…¨ã¦ã§å„ªä½
2. **ãƒ‡ãƒãƒƒã‚°å®¹æ˜“æ€§å‘ä¸Šã¯ä»£æ›¿æ¡ˆã§å¯¾å¿œ**: æ²¡æ—¥éŒ²DBãƒ€ãƒ³ãƒ—ã‚³ãƒãƒ³ãƒ‰ï¼ˆ`--format yaml`ï¼‰ã¾ãŸã¯Web UIãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
3. **Gitç®¡ç†ã¯å®šæœŸãƒ€ãƒ³ãƒ—ã§å¯¾å¿œ**: `cron` ã§å®šæœŸçš„ã«æ²¡æ—¥éŒ²DBã‚’YAMLãƒ€ãƒ³ãƒ—ã—ã¦ commit

**ç†ç”±**: é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«v2ã¯ã€ãƒ‡ãƒãƒƒã‚°å®¹æ˜“æ€§ã®å‘ä¸Šã¨ã„ã†ãƒ¡ãƒªãƒƒãƒˆã«å¯¾ã—ã€å®Ÿè£…ãƒ»é‹ç”¨ã‚³ã‚¹ãƒˆãŒé«˜ã™ãã‚‹ã€‚ä»£æ›¿æ¡ˆã§åŒç­‰ã®ãƒ¡ãƒªãƒƒãƒˆã‚’ä½ã‚³ã‚¹ãƒˆã§å®Ÿç¾å¯èƒ½ã€‚

---

**æ¬¡ã‚¹ãƒ†ãƒƒãƒ—**: æ®¿ã®ã”åˆ¤æ–­ã‚’ä»°ãã€‚

- **Aæ¡ˆ**: ç¾è¡Œã®DBç›´æ¥æ–¹å¼ã‚’ç¶­æŒ + ä»£æ›¿æ¡ˆAï¼ˆãƒ€ãƒ³ãƒ—ã‚³ãƒãƒ³ãƒ‰ï¼‰å®Ÿè£…
- **Bæ¡ˆ**: ç¾è¡Œã®DBç›´æ¥æ–¹å¼ã‚’ç¶­æŒ + ä»£æ›¿æ¡ˆBï¼ˆWeb UIï¼‰å®Ÿè£…
- **Cæ¡ˆ**: é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«v2ï¼ˆYAML inboxæ–¹å¼ï¼‰ã®å®Ÿè£…ã‚’å¼·è¡Œ

---

**ä»¥ä¸Šã€å®¶è€ï¼ˆè¶³è»½2å·ä»£ç†ï¼‰ã‚ˆã‚Šç”³ã—ä¸Šã’ã‚‹ã€‚**

---

# è£œè¶³: ãŠé‡å­ç›£æŸ»å ±å‘Šã®YAMLå—ä¿¡ï¼ˆ2026-02-08è¿½è¨˜ï¼‰

> **è¿½è¨˜æ—¥**: 2026-02-08
> **è¿½è¨˜è€…**: ashigaru1
> **ç†ç”±**: å°†è»ã®è£œè¶³æŒ‡ç¤ºã€ŒãŠé‡å­ã®DBç›´æ¥æ›¸ãè¾¼ã¿å»ƒæ­¢ã€DBæ›¸ãè¾¼ã¿æ¨©é™ã¯å®¶è€ã®ã¿ã«é›†ç´„ã€ã«å¯¾å¿œ

## æ¦‚è¦

ãŠé‡å­ã®DBç›´æ¥æ›¸ãè¾¼ã¿ã‚’å»ƒæ­¢ã—ã€ç›£æŸ»çµæœãƒ»å…ˆè¡Œå‰²å½“å ±å‘Šã‚’YAML inboxçµŒç”±ã§å®¶è€ãŒå—ä¿¡ã™ã‚‹ã€‚
å®¶è€ã¯YAMLå ±å‘Šã‚’èª­ã¿å–ã‚Šã€æ²¡æ—¥éŒ²DBã«è¨˜éŒ²ã™ã‚‹è²¬å‹™ã‚’è² ã†ã€‚

### DBæ›¸ãè¾¼ã¿æ¨©é™ã®å†å®šç¾©

| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ | DBèª­ã¿å–ã‚Š | DBæ›¸ãè¾¼ã¿ |
|------------|----------|----------|
| å°†è» | å¯ï¼ˆcmd listç­‰ï¼‰ | å¯ï¼ˆcmd addï¼‰ |
| å®¶è€ | å¯ï¼ˆå…¨æ¨©ï¼‰ | **å¯ï¼ˆå…¨æ¨©ï¼‰** |
| è¶³è»½/éƒ¨å±‹å­ | ä¸å¯ | **ä¸å¯ï¼ˆYAML inboxã®ã¿ï¼‰** |
| ãŠé‡å­ | **å¯ï¼ˆå…¨æ¨©é–²è¦§ï¼‰** | **ä¸å¯ï¼ˆYAML inboxã®ã¿ï¼‰** |

---

## 1. ãŠé‡å­å ±å‘Šinboxã®æ§‹é€ 

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ
```
queue/inbox/
  â”œâ”€â”€ roju_ohariko.yaml       # è€ä¸­ã¸ã®ãŠé‡å­å ±å‘Š inbox
  â””â”€â”€ ooku_ohariko.yaml       # å¾¡å°æ‰€ã¸ã®ãŠé‡å­å ±å‘Š inbox
```

### YAMLãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
```yaml
# queue/inbox/roju_ohariko.yaml
audit_reports:
  - id: audit_report_001
    subtask_id: subtask_294
    timestamp: "2026-02-08T11:30:00"
    result: approved  # approved | rejected_trivial | rejected_judgment
    summary: |
      ç›£æŸ»çµæœ: åˆæ ¼ã€‚4è¦³ç‚¹ã‚¯ãƒªã‚¢ã€‚å“è³ªã¯åŠç¬¬ç‚¹ã‚ˆã€‚
    findings: []
    read: false

  - id: audit_report_002
    subtask_id: subtask_296
    timestamp: "2026-02-08T11:40:00"
    result: rejected_trivial
    summary: |
      ç›£æŸ»çµæœ: è¦ä¿®æ­£ï¼ˆè‡ªæ˜ï¼‰ã€‚æ•°å€¤ä¸ä¸€è‡´ï¼ˆ17ç®‡æ‰€â†’15ç®‡æ‰€ï¼‰ã‚’æ¤œå‡ºã€‚
    findings:
      - "194è¡Œç›®: ã€Œ17ç®‡æ‰€ã€â†’ã€Œ15ç®‡æ‰€ã€ã«ä¿®æ­£ãŒå¿…è¦"
    read: false

preemptive_assignments:
  - id: preassign_001
    subtask_id: subtask_300
    cmd_id: cmd_128
    worker: ashigaru2
    timestamp: "2026-02-08T12:00:00"
    reason: "idleè¶³è»½2åæ¤œå‡ºã€æœªå‰²å½“subtaskã¨ã®é©åˆã‚’ç¢ºèª"
    read: false
```

---

## 2. å®¶è€ã®æ–°è¦æ¥­å‹™ï¼šãŠé‡å­å ±å‘Šã®å‡¦ç†

### 2.1 ç›£æŸ»å ±å‘Šã®å—ä¿¡ãƒ»DBè¨˜éŒ²ãƒ•ãƒ­ãƒ¼

```
STEP 1: ãŠé‡å­ã‹ã‚‰ send-keys é€šçŸ¥ã‚’å—ä¿¡
  â†’ ä¾‹: ã€ŒãŠé‡å­ã‚ˆã‚Šç›£æŸ»å ±å‘Šã€‚subtask_XXX: åˆæ ¼ã€‚å ±å‘ŠYAMLã‚’ç¢ºèªãã ã•ã‚Œã€‚ã€

STEP 2: ãŠé‡å­å ±å‘Šinboxã‚’èª­ã¿å–ã‚Š
  Read queue/inbox/{è‡ªåˆ†ã®æ‹…å½“}_ohariko.yaml
  # è€ä¸­ãªã‚‰ roju_ohariko.yamlã€å¾¡å°æ‰€ãªã‚‰ ooku_ohariko.yaml

STEP 3: read: false ã®å ±å‘Šã‚’æŠ½å‡º
  # audit_reports ãƒªã‚¹ãƒˆã‹ã‚‰ read: false ã®ã‚¨ãƒ³ãƒˆãƒªã‚’å…¨ã¦å–å¾—

STEP 4: å„å ±å‘Šã‚’DBã«è¨˜éŒ²
  â–  result: approved ã®å ´åˆ
    python3 scripts/botsunichiroku.py report add {subtask_id} ohariko \
      --status done \
      --summary "{summaryå†…å®¹}"
    python3 scripts/botsunichiroku.py subtask update {subtask_id} \
      --audit-status done

  â–  result: rejected_trivial ã®å ´åˆ
    python3 scripts/botsunichiroku.py report add {subtask_id} ohariko \
      --status done \
      --summary "{summaryå†…å®¹}" \
      --findings '{findingså†…å®¹ã‚’JSONå½¢å¼ã§}'
    python3 scripts/botsunichiroku.py subtask update {subtask_id} \
      --audit-status rejected
    # â†’ è¶³è»½/éƒ¨å±‹å­ã«å·®ã—æˆ»ã—ä¿®æ­£ã‚’æŒ‡ç¤º

  â–  result: rejected_judgment ã®å ´åˆ
    python3 scripts/botsunichiroku.py report add {subtask_id} ohariko \
      --status done \
      --summary "{summaryå†…å®¹}" \
      --findings '{findingså†…å®¹ã‚’JSONå½¢å¼ã§}'
    python3 scripts/botsunichiroku.py subtask update {subtask_id} \
      --audit-status rejected
    # â†’ dashboard.mdã€Œè¦å¯¾å¿œã€ã«è¨˜è¼‰ï¼ˆæ®¿ã®åˆ¤æ–­ã‚’ä»°ãï¼‰

STEP 5: YAMLå ±å‘Šã® read ãƒ•ãƒ©ã‚°ã‚’ true ã«æ›´æ–°
  Edit queue/inbox/{è‡ªåˆ†ã®æ‹…å½“}_ohariko.yaml
  # è©²å½“å ±å‘Šã® read: false â†’ read: true ã«å¤‰æ›´

STEP 6: ç›£æŸ»çµæœã«å¿œã˜ãŸå¾Œç¶šå‡¦ç†
  â–  approved â†’ æˆ¦æœç§»å‹•ãƒ»æ¬¡ã‚¿ã‚¹ã‚¯é€²è¡Œ
  â–  rejected_trivial â†’ è¶³è»½/éƒ¨å±‹å­ã«å·®ã—æˆ»ã—ä¿®æ­£æŒ‡ç¤ºï¼ˆsend-keys + subtask updateï¼‰
  â–  rejected_judgment â†’ dashboard.mdã€Œè¦å¯¾å¿œã€ã«è¨˜è¼‰
```

### 2.2 å…ˆè¡Œå‰²å½“å ±å‘Šã®å—ä¿¡ãƒ»DBè¨˜éŒ²ãƒ•ãƒ­ãƒ¼

```
STEP 1: ãŠé‡å­ã‹ã‚‰ send-keys é€šçŸ¥ã‚’å—ä¿¡
  â†’ ä¾‹: ã€ŒãŠé‡å­ã‚ˆã‚Šå ±å‘Šã€‚subtask_YYYã‚’ashigaru2ã«å…ˆè¡Œå‰²å½“ã€‚å ±å‘ŠYAMLã‚’ç¢ºèªãã ã•ã‚Œã€‚ã€

STEP 2: ãŠé‡å­å ±å‘Šinboxã‚’èª­ã¿å–ã‚Š
  Read queue/inbox/{è‡ªåˆ†ã®æ‹…å½“}_ohariko.yaml

STEP 3: read: false ã®å…ˆè¡Œå‰²å½“å ±å‘Šã‚’æŠ½å‡º
  # preemptive_assignments ãƒªã‚¹ãƒˆã‹ã‚‰ read: false ã®ã‚¨ãƒ³ãƒˆãƒªã‚’å…¨ã¦å–å¾—

STEP 4: å„å…ˆè¡Œå‰²å½“ã‚’DBã«è¨˜éŒ²
  python3 scripts/botsunichiroku.py subtask assign {subtask_id} {worker}
  # â†’ æ²¡æ—¥éŒ²DBã® subtask ã® worker ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ›´æ–°

STEP 5: YAMLå ±å‘Šã® read ãƒ•ãƒ©ã‚°ã‚’ true ã«æ›´æ–°
  Edit queue/inbox/{è‡ªåˆ†ã®æ‹…å½“}_ohariko.yaml
  # è©²å½“å ±å‘Šã® read: false â†’ read: true ã«å¤‰æ›´

STEP 6: å…ˆè¡Œå‰²å½“ã®è¨˜éŒ²ã‚’dashboard.mdã«åæ˜ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  # ãŠé‡å­ã®å…ˆè¡Œå‰²å½“ã‚’æˆ¦æœã¨ã—ã¦è¨˜éŒ²
```

---

## 3. å®¶è€ã®è²¬å‹™å¤‰æ›´ç‚¹ã‚µãƒãƒª

| æ¥­å‹™ | æ—§ä»•æ§˜ | æ–°ä»•æ§˜ |
|------|--------|--------|
| ãŠé‡å­ç›£æŸ»ä¾é ¼ | needs_audit=1ã®subtaskå®Œäº†æ™‚ã€send-keysã§ãŠé‡å­ã‚’èµ·ã“ã™ | **å¤‰æ›´ãªã—** |
| ãŠé‡å­ç›£æŸ»çµæœç¢ºèª | DBã‹ã‚‰ report list --worker ohariko ã§ç¢ºèª | **YAML inboxèª­ã¿å–ã‚Š** â†’ DBè¨˜éŒ² |
| ãŠé‡å­å…ˆè¡Œå‰²å½“ç¢ºèª | DBã‹ã‚‰ subtask list ã§ç¢ºèª | **YAML inboxèª­ã¿å–ã‚Š** â†’ DBè¨˜éŒ² |
| audit_status æ›´æ–° | ï¼ˆãŠé‡å­ãŒå®Ÿæ–½ï¼‰ | **å®¶è€ãŒå®Ÿæ–½** |

---

## 4. å®¶è€ã¸ã®å½±éŸ¿è©•ä¾¡

### è² è·å¢—åŠ ã®å†…å®¹

| é …ç›® | ä½œæ¥­å†…å®¹ | é »åº¦ | æ‰€è¦æ™‚é–“ï¼ˆæ¨å®šï¼‰ |
|------|---------|------|---------------|
| YAMLèª­ã¿å–ã‚Š | Read queue/inbox/{è‡ªåˆ†}_ohariko.yaml | ãŠé‡å­é€šçŸ¥ã”ã¨ | ~200ãƒˆãƒ¼ã‚¯ãƒ³ |
| DBè¨˜éŒ² | report add + subtask update | ç›£æŸ»å ±å‘Š1ä»¶ã«ã¤ã | ~300ãƒˆãƒ¼ã‚¯ãƒ³ |
| YAMLæ›´æ–° | read ãƒ•ãƒ©ã‚°æ›´æ–° | å ±å‘Šå‡¦ç†å¾Œ | ~200ãƒˆãƒ¼ã‚¯ãƒ³ |
| **åˆè¨ˆ** | **~700ãƒˆãƒ¼ã‚¯ãƒ³/å ±å‘Š** | **ç›£æŸ»å ±å‘Šã”ã¨** | **700ãƒˆãƒ¼ã‚¯ãƒ³** |

### ãƒ¡ãƒªãƒƒãƒˆ

1. **DBæ›¸ãè¾¼ã¿æ¨©é™ã®é›†ç´„**: å®¶è€ã®ã¿ãŒDBæ›¸ãè¾¼ã¿å¯èƒ½ â†’ ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§å‘ä¸Š
2. **ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£**: YAMLå ±å‘ŠãŒæ®‹ã‚‹ãŸã‚ã€ãŠé‡å­ã®åˆ¤æ–­çµŒç·¯ãŒè¿½è·¡å¯èƒ½
3. **ç›£æŸ»ã®é€æ˜æ€§**: ãŠé‡å­ã®ç›£æŸ»çµæœã‚’å®¶è€ãŒç¢ºèªã—ã¦ã‹ã‚‰DBè¨˜éŒ² â†’ äºŒé‡ãƒã‚§ãƒƒã‚¯

### ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ

1. **å®¶è€ã®è² è·å¢—**: ç›£æŸ»å ±å‘Š1ä»¶ã«ã¤ã ~700ãƒˆãƒ¼ã‚¯ãƒ³
2. **ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·å¢—**: ãŠé‡å­å ±å‘Š â†’ å®¶è€å‡¦ç† â†’ DBè¨˜éŒ²ã®3ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆæ—§: ãŠé‡å­â†’DBç›´æ¥ã®1ã‚¹ãƒ†ãƒƒãƒ—ï¼‰

---

## 5. å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

å®¶è€ã® instructions/karo.md ã«ä»¥ä¸‹ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼š

- [ ] ãŠé‡å­å ±å‘Šinboxã®èª­ã¿å–ã‚Šæ‰‹é †
- [ ] ç›£æŸ»å ±å‘Šï¼ˆapproved / rejected_trivial / rejected_judgmentï¼‰ã®DBè¨˜éŒ²æ‰‹é †
- [ ] å…ˆè¡Œå‰²å½“å ±å‘Šã®DBè¨˜éŒ²æ‰‹é †
- [ ] YAMLå ±å‘Šã® read ãƒ•ãƒ©ã‚°æ›´æ–°æ‰‹é †
- [ ] ç›£æŸ»çµæœã«å¿œã˜ãŸå¾Œç¶šå‡¦ç†ï¼ˆå·®ã—æˆ»ã—ã€è¦å¯¾å¿œè¨˜è¼‰ç­‰ï¼‰

---

## 6. ç§»è¡Œæ‰‹é †ï¼ˆå°†è»æ‰¿èªå¾Œï¼‰

1. **queue/inbox/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ**:
   ```bash
   mkdir -p queue/inbox
   ```

2. **ãŠé‡å­å ±å‘Šinboxãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆ**:
   ```bash
   touch queue/inbox/roju_ohariko.yaml
   touch queue/inbox/ooku_ohariko.yaml
   # åˆæœŸå†…å®¹:
   # audit_reports: []
   # preemptive_assignments: []
   ```

3. **instructions/ohariko.md æ”¹ä¿®**: docs/ohariko_instructions_changes.md ã®æ›¸ãæ›ãˆæ¡ˆã‚’åæ˜ 

4. **instructions/karo.md æ”¹ä¿®**: æœ¬è£œè¶³ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®å†…å®¹ã‚’åæ˜ 

5. **ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆé‹ç”¨**: ãŠé‡å­1ä»¶ã®ç›£æŸ»å ±å‘Šã§å‹•ä½œç¢ºèª

6. **å…¨é¢å±•é–‹**: å•é¡Œãªã‘ã‚Œã°å…¨ç›£æŸ»å ±å‘Šã«é©ç”¨

---

**ä»¥ä¸Šã€å°†è»ã®è£œè¶³æŒ‡ç¤ºã«å¯¾å¿œã—ãŸå®¶è€æ¥­å‹™ã®è¿½åŠ äº‹é …ã§ã”ã–ã‚‹ã€‚**
